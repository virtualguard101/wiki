#include <pthread.h>
#include <unistd.h>
#include <stdlib.h>
#include <stdio.h>
#include <time.h>


// Book structure definition.
struct Book {
    char name[50];
    char author[50];
    int total;
    int available;
};

// Read-write lock for synchronizing access to the books array.
extern pthread_rwlock_t rwlock;

// Sample book data.
extern struct Book books[7];

// Buffer for inter-process communication.
extern char buffer[100];

// Pipe file descriptors.
extern int pipe_fd[2];

// Send message to parent process by child process.
void send_message(char type, int thread_id, const char* book_name);

// Print single book information.
void print_book_info(struct Book books, int pattern);

// Print total book information.
void total_info(struct Book books[], int total_count);

// Get a random index within the integer parameter `total`.
int get_random_index(int total);

// The thread generated by child process.
void* search_thread(void* arg);

// The thread generated by child process.
void* borrow_thread(void* arg);

// Thread function for searching a book randomly, use for printing information.
void* search(char* book_name);

// Thread function for borrowing, judging whether the borrow thread can be carried out, and printing info the same as above.
void* borrow(char* book_name);
